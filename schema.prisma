generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url = env("DATABASE_URL")
  relationMode = "prisma"

}

model User {
    id        String    @id @default(cuid())
    userId  String    @unique
    activities Activity[]
    firstName String?
    lastName String?
    imageUrl String?
    createdAt     DateTime @default(now())
    userStats UserStats?
    team Team? @relation(fields: [teamId], references: [id])
    teamId String?
    accessToken String?
    refreshToken String?
    @@index([teamId])
}

model UserStats {
    id        String    @id @default(cuid())
    user    User  @relation(fields: [userId], references: [userId])
    userId  String   @unique
     @@index([userId])
    recentRunDistance Float?
    recentRideDistance Float?
    recentSwimDistance Float?
    recentRunCount Int?
    recentRideCount Int?
    recentSwimCount Float?
}

model Activity {
    id        String    @id @default(cuid())
    activityId  String    @unique
    user    User    @relation(fields: [userId], references: [userId])
    userId  String
    @@index([userId])
    type String?
    startDate DateTime?
    startLatLng Json?
    distance Float?
    movingTime Int?
    elevHigh Float?
    elevLow Float?
    elapsedTime Int?
    kudosCount Int?
    averageSpeed Float?
    maxSpeed Float?
    calories Float?
    averageWatts Float?
    kilojoules Float?
    maxWatts Float?
}

model Feedback {
    id           String    @id @default(cuid())
    content      String
    createdAt    DateTime @default(now())
}

model Team {
    id           String    @id @default(cuid())
    slug         String @unique
    name         String @unique
    imageUrl     String?
    createdAt    DateTime @default(now())
    members       User[]
}